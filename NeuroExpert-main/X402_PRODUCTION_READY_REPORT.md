# –û—Ç—á–µ—Ç –æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ x402 –∫ production

**–î–∞—Ç–∞:** 30 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-Ready (—Å —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)  
**–í–µ—Ä—Å–∏—è:** 2.0

---

## üéØ –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ **—Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** —á–µ—Ä–µ–∑ ethers.js v6 –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ x402. –¢–µ–ø–µ—Ä—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ NeuroExpert –≥–æ—Ç–æ–≤–∞ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MetaMask, Coinbase Wallet –∏ –¥—Ä—É–≥–∏—Ö Web3 –∫–æ—à–µ–ª—å–∫–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
‚úÖ –†–µ–∞–ª—å–Ω–æ–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ EIP-712  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ethers.js v6  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ERC-20 —Ç–æ–∫–µ–Ω–æ–≤ (USDC, USDT)  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ facilitator  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤  
‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  

---

## üì¶ –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. utils/x402Payment.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏ —á–µ—Ä–µ–∑ ethers.js v6

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
createEthersProvider(web3Provider)

// –ü–æ–ª—É—á–µ–Ω–∏–µ signer –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è
getSigner()

// –°–æ–∑–¥–∞–Ω–∏–µ EIP-712 —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
createX402TypedData(paymentDetails, chainId, verifyingContract)

// –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ x402 –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ EIP-712
signX402Payment(paymentDetails, walletAddress)

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞–ø—Ä—è–º—É—é (fallback)
sendTokenTransaction(tokenSymbol, recipientAddress, amount, chain)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ —Ç–æ–∫–µ–Ω–∞
getTokenBalance(tokenSymbol, walletAddress, chain)

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ allowance
checkTokenAllowance(tokenSymbol, ownerAddress, spenderAddress)
approveToken(tokenSymbol, spenderAddress, amount)

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
getTransactionStatus(txHash, chain)

// –£—Ç–∏–ª–∏—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
formatTokenAmount(amount, decimals)
parseTokenAmount(amount, decimals)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ethers.js v6 (–Ω–æ–≤–µ–π—à–∞—è –≤–µ—Ä—Å–∏—è)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ EIP-712 –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è
- –†–∞–±–æ—Ç–∞ —Å ERC-20 —Ç–æ–∫–µ–Ω–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü
- –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. utils/x402Client.js
**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

#### signPayment(paymentDetails, walletAddress)
–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ethers.js.

```javascript
const client = new X402Client();
const paymentDetails = await client.initiatePayment(100, 'base', 'usdc');
const signedPayload = await client.signPayment(paymentDetails, walletAddress);
```

#### executePayment(amount, walletAddress, chain, token)
–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ–º:
1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞
2. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª–µ–∫ (EIP-712)
3. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ facilitator
4. –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```javascript
const result = await client.executePayment(
  100,              // –°—É–º–º–∞ –≤ USD
  walletAddress,    // –ê–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  'base',          // –°–µ—Ç—å
  'usdc'           // –¢–æ–∫–µ–Ω
);
// result: { success, txHash, status, explorerUrl, ... }
```

#### executePaymentWithFallback(amount, walletAddress, chain, token)
–£–º–Ω—ã–π –º–µ—Ç–æ–¥ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback:
- –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å x402
- –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ facilitator –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ç–æ–∫–µ–Ω–æ–≤

```javascript
const result = await client.executePaymentWithFallback(
  100,
  walletAddress,
  'base',
  'usdc'
);
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –ª—É—á—à–∏–π –º–µ—Ç–æ–¥
```

#### getTokenBalance(tokenSymbol, walletAddress, chain)
–ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ç–æ–∫–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const balance = await client.getTokenBalance('usdc', walletAddress, 'base');
console.log(`–ë–∞–ª–∞–Ω—Å USDC: ${balance}`);
```

#### sendTokenDirect(tokenSymbol, recipientAddress, amount, chain)
–ü—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ (–º–∏–Ω—É—è x402).

```javascript
const result = await client.sendTokenDirect(
  'usdc',
  recipientAddress,
  100,
  'base'
);
```

---

## üîê –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (EIP-712)

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
```javascript
const typedData = {
  types: {
    EIP712Domain: [...],
    Payment: [
      { name: 'to', type: 'address' },
      { name: 'amount', type: 'uint256' },
      { name: 'token', type: 'address' },
      { name: 'deadline', type: 'uint256' },
      { name: 'nonce', type: 'uint256' }
    ]
  },
  domain: {
    name: 'x402 Payment Protocol',
    version: '1',
    chainId: 8453, // Base
    verifyingContract: '0x...'
  },
  message: {
    to: '0x...',
    amount: '100000000',
    token: '0x...',
    deadline: 1696089600,
    nonce: Date.now()
  }
};
```

2. **–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ethers.js**
```javascript
const signer = await getSigner();
const signature = await signer.signTypedData(
  typedData.domain,
  { Payment: typedData.types.Payment },
  typedData.message
);
```

3. **–°–æ–∑–¥–∞–Ω–∏–µ payload**
```javascript
const payload = {
  payment: typedData.message,
  signature: signature,
  chainId: 8453,
  timestamp: Date.now()
};
const payloadBase64 = Buffer.from(JSON.stringify(payload)).toString('base64');
```

4. **–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ facilitator**
```javascript
await client.verifyPayment(payloadBase64);
await client.settlePayment(payloadBase64);
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –ø–ª–∞—Ç–µ–∂ —á–µ—Ä–µ–∑ x402

```javascript
import { X402Client } from './utils/x402Client';
import { connectWallet } from './utils/blockchain';

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫–æ—à–µ–ª–µ–∫
const wallet = await connectWallet();

// –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç
const client = new X402Client();

// –í—ã–ø–æ–ª–Ω—è–µ–º –ø–ª–∞—Ç–µ–∂
try {
  const result = await client.executePayment(
    100,              // 100 USD
    wallet.address,   // –ê–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    'base',          // Base network
    'usdc'           // USDC token
  );
  
  console.log('–ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–µ–Ω!');
  console.log('TX Hash:', result.txHash);
  console.log('Explorer:', result.explorerUrl);
} catch (error) {
  console.error('–û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞:', error.message);
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–ª–∞—Ç–µ–∂ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback

```javascript
// –£–º–Ω—ã–π –ø–ª–∞—Ç–µ–∂ —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –º–µ—Ç–æ–¥–æ–º
const result = await client.executePaymentWithFallback(
  50,
  wallet.address,
  'base',
  'usdc'
);

if (result.method === 'direct') {
  console.log('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä—è–º–æ–π –º–µ—Ç–æ–¥ (facilitator –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)');
} else {
  console.log('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª x402');
}
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ –ø–ª–∞—Ç–µ–∂–æ–º

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å —Ç–æ–∫–µ–Ω–∞
const balance = await client.getTokenBalance(
  'usdc',
  wallet.address,
  'base'
);

console.log(`–í–∞—à –±–∞–ª–∞–Ω—Å USDC: ${balance}`);

if (parseFloat(balance) >= 100) {
  // –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
  await client.executePayment(100, wallet.address, 'base', 'usdc');
} else {
  console.log('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ USDC –¥–ª—è –ø–ª–∞—Ç–µ–∂–∞');
}
```

### –ü—Ä–∏–º–µ—Ä 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```javascript
const result = await client.executePayment(100, wallet.address, 'base', 'usdc');

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
const interval = setInterval(async () => {
  const status = await client.getPaymentStatus(result.txHash, 'base');
  
  console.log(`–°—Ç–∞—Ç—É—Å: ${status.status}`);
  console.log(`–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π: ${status.confirmations}`);
  
  if (status.status === 'confirmed') {
    console.log('–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!');
    clearInterval(interval);
  } else if (status.status === 'failed') {
    console.log('–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—Ä–æ–≤–∞–ª–µ–Ω–∞');
    clearInterval(interval);
  }
}, 5000);
```

### –ü—Ä–∏–º–µ—Ä 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```javascript
import { useState } from 'react';
import { X402Client } from '../utils/x402Client';
import { connectWallet } from '../utils/blockchain';

function PaymentButton() {
  const [loading, setLoading] = useState(false);
  const [status, setStatus] = useState('');

  const handlePayment = async () => {
    try {
      setLoading(true);
      setStatus('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞...');
      
      const wallet = await connectWallet();
      
      setStatus('–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞...');
      const client = new X402Client();
      const balance = await client.getTokenBalance('usdc', wallet.address, 'base');
      
      if (parseFloat(balance) < 100) {
        throw new Error('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ USDC');
      }
      
      setStatus('–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞...');
      const result = await client.executePaymentWithFallback(
        100,
        wallet.address,
        'base',
        'usdc'
      );
      
      setStatus(`–£—Å–ø–µ—à–Ω–æ! TX: ${result.txHash}`);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
      await fetch('/api/balance/update', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          amount: 100,
          txHash: result.txHash,
          operation: 'deposit'
        })
      });
      
    } catch (error) {
      setStatus(`–û—à–∏–±–∫–∞: ${error.message}`);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div>
      <button onClick={handlePayment} disabled={loading}>
        {loading ? '–û–±—Ä–∞–±–æ—Ç–∫–∞...' : '–ü–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ $100'}
      </button>
      {status && <p>{status}</p>}
    </div>
  );
}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### ERC-20 –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

–ú–æ–¥—É–ª—å x402Payment.js —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É ERC-20:

**–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
```javascript
const erc20Abi = [
  'function balanceOf(address owner) view returns (uint256)',
  'function decimals() view returns (uint8)',
  'function allowance(address owner, address spender) view returns (uint256)'
];
```

**–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤:**
```javascript
const erc20Abi = [
  'function transfer(address to, uint256 amount) returns (bool)',
  'function approve(address spender, uint256 amount) returns (bool)'
];
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü

**–ò–∑ USD –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã —Ç–æ–∫–µ–Ω–∞:**
```javascript
// –î–ª—è USDC (6 decimals)
// 100 USD ‚Üí 100,000,000 units
const amountInUnits = ethers.parseUnits('100', 6);
// Result: 100000000n (bigint)
```

**–ò–∑ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü –≤ USD:**
```javascript
// 100,000,000 units ‚Üí 100 USD
const amountInUSD = ethers.formatUnits('100000000', 6);
// Result: "100.0"
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ú–æ–¥—É–ª—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ç–æ–∫–µ–Ω–æ–≤
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ –∫–æ—à–µ–ª—å–∫–µ
- –û—à–∏–±–∫–∏ —Å–µ—Ç–∏ (RPC –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- –ù–µ–≤–µ—Ä–Ω–∞—è —Å–µ—Ç—å (wrong network)
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å facilitator
- –û—à–∏–±–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (revert)

---

## üöÄ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ –∫ production

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**
   - EIP-712 –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ ethers.js v6
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MetaMask –∏ Coinbase Wallet
   - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ x402

2. **–†–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏**
   - –û—Ç–ø—Ä–∞–≤–∫–∞ USDC/USDT
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ allowance
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
   - –°—Å—ã–ª–∫–∏ –Ω–∞ block explorer

4. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä—è–º—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ facilitator
   - Graceful degradation

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤
   - User-friendly —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ production

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ facilitator (–ö—Ä–∏—Ç–∏—á–Ω–æ)

```bash
# –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –æ—Ç Coinbase CDP
# https://cdp.coinbase.com/

# –û–±–Ω–æ–≤–∏—Ç—å .env.local
NEXT_PUBLIC_X402_FACILITATOR_URL=https://facilitator.coinbase.com
X402_FACILITATOR_API_KEY=your_api_key
X402_FACILITATOR_SECRET=your_secret
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è

```bash
# –í .env.local —É–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
NEXT_PUBLIC_RECIPIENT_WALLET_ADDRESS=0xYourCompanyWalletAddress
```

### 3. Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –ë–î
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Webhook –æ—Ç facilitator –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä —Å—Ö–µ–º—ã –ë–î:**
```sql
CREATE TABLE crypto_transactions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL,
  tx_hash VARCHAR(66) NOT NULL,
  chain VARCHAR(20) NOT NULL,
  token VARCHAR(10) NOT NULL,
  amount DECIMAL(10,2) NOT NULL,
  status VARCHAR(20) NOT NULL,
  method VARCHAR(20), -- 'x402' or 'direct'
  created_at TIMESTAMP DEFAULT NOW(),
  confirmed_at TIMESTAMP,
  block_number INTEGER,
  confirmations INTEGER DEFAULT 0
);

CREATE INDEX idx_tx_hash ON crypto_transactions(tx_hash);
CREATE INDEX idx_user_status ON crypto_transactions(user_id, status);
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Testnet —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ Base Sepolia testnet
NEXT_PUBLIC_DEFAULT_CHAIN=base_sepolia

# 2. –ü–æ–ª—É—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã
# https://faucet.quicknode.com/base/sepolia

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã:**
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è x402Payment.js
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è x402Client.js
- E2E —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–æ—à–µ–ª—å–∫–∞–º–∏ (testnet)
- –¢–µ—Å—Ç—ã fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞

### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**
```javascript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π
import { trackPayment } from './analytics';

const result = await client.executePayment(...);
trackPayment({
  txHash: result.txHash,
  amount: result.amount,
  status: result.status,
  method: result.method
});
```

**Metrics –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞
- –ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è x402 vs direct
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- Rate failed —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Frontend (Next.js)                       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ  ‚îÇ PricingCalculator‚îÇ  ‚îÇ WalletConnector ‚îÇ                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îÇ           ‚îÇ                     ‚îÇ                          ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ
‚îÇ                     ‚îÇ                                       ‚îÇ
‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ
‚îÇ           ‚îÇ   x402Client.js    ‚îÇ                           ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ
‚îÇ                     ‚îÇ                                       ‚îÇ
‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ      ‚îÇ              ‚îÇ              ‚îÇ                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ  ‚îÇx402Pay ‚îÇ   ‚îÇblockchain‚îÇ  ‚îÇx402Config‚îÇ                  ‚îÇ
‚îÇ  ‚îÇment.js ‚îÇ   ‚îÇ   .js    ‚îÇ  ‚îÇ   .js   ‚îÇ                  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ      ‚îÇ             ‚îÇ              ‚îÇ                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ             ‚îÇ              ‚îÇ
       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
       ‚îÇ  ‚îÇ   MetaMask /        ‚îÇ   ‚îÇ
       ‚îÇ  ‚îÇ  Coinbase Wallet    ‚îÇ   ‚îÇ
       ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
       ‚îÇ             ‚îÇ              ‚îÇ
       ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
       ‚îÇ   ‚îÇ   Blockchain RPC    ‚îÇ ‚îÇ
       ‚îÇ   ‚îÇ  (Base, Ethereum)   ‚îÇ ‚îÇ
       ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
       ‚îÇ             ‚îÇ              ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ Coinbase CDP        ‚îÇ
          ‚îÇ x402 Facilitator    ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ   Blockchain        ‚îÇ
          ‚îÇ  (Transaction       ‚îÇ
          ‚îÇ   Settlement)       ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéì –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [x402 Protocol](https://www.x402.org/)
- [Coinbase CDP](https://docs.cdp.coinbase.com/x402/docs/welcome)
- [ethers.js v6](https://docs.ethers.org/v6/)
- [EIP-712](https://eips.ethereum.org/EIPS/eip-712)

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞:
- [x402 Examples](https://github.com/coinbase/x402-examples)
- [EIP-712 Signing](https://docs.ethers.org/v6/api/providers/#Signer-signTypedData)

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–µ—Ç–∏:
- [Base Sepolia Faucet](https://faucet.quicknode.com/base/sepolia)
- [Base Sepolia Explorer](https://sepolia.basescan.org/)

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

```markdown
Backend:
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –¢–∞–±–ª–∏—Ü—ã –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å–æ–∑–¥–∞–Ω—ã
- [ ] API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- [ ] Webhook –æ—Ç facilitator –Ω–∞—Å—Ç—Ä–æ–µ–Ω

Frontend:
- [ ] ethers.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (‚úÖ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω v6.9.0)
- [ ] –í—Å–µ —É—Ç–∏–ª–∏—Ç—ã —Å–æ–∑–¥–∞–Ω—ã (‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- [ ] WalletConnector –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] PricingCalculator –æ–±–Ω–æ–≤–ª–µ–Ω

–ë–ª–æ–∫—á–µ–π–Ω:
- [ ] –ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è —É–∫–∞–∑–∞–Ω –≤ .env
- [ ] RPC endpoints –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ testnet –ø—Ä–æ–≤–µ–¥–µ–Ω–æ
- [ ] Mainnet –∞–¥—Ä–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

x402:
- [ ] Facilitator URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] API –∫–ª—é—á–∏ –ø–æ–ª—É—á–µ–Ω—ã
- [ ] Health check —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- [ ] –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –Ω–µ –≤ –∫–æ–¥–µ
- [ ] Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] CORS –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Input validation –≤–µ–∑–¥–µ

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- [ ] Alerts –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Error tracking —Ä–∞–±–æ—Ç–∞–µ—Ç
```

---

## üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –ª–∏–º–∏—Ç—ã

### –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```javascript
// –ò–∑ x402Config.js
limits: {
  minAmount: 1,      // –ú–∏–Ω–∏–º—É–º $1
  maxAmount: 10000   // –ú–∞–∫—Å–∏–º—É–º $10,000
}

transaction: {
  defaultDeadlineMinutes: 30  // –ü–ª–∞—Ç–µ–∂ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç
}
```

### –ö–æ–º–∏—Å—Å–∏–∏:

**x402 Protocol:**
- Facilitator fee: ~0.1-0.5% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç Coinbase CDP)
- Network gas fee: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç congestion)

**Direct Transfer (fallback):**
- Network gas fee only
- –û–±—ã—á–Ω–æ $0.10-$2.00 –Ω–∞ Base network

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ª–∏–º–∏—Ç–∞–º:

```javascript
// –î–ª—è production
limits: {
  minAmount: 10,      // –ú–∏–Ω–∏–º—É–º $10 (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç gas)
  maxAmount: 50000    // –ú–∞–∫—Å–∏–º—É–º $50,000
}

// –î–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const LIMITS = {
  basic: { min: 10, max: 1000 },
  premium: { min: 10, max: 10000 },
  enterprise: { min: 100, max: 100000 }
};
```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ß—Ç–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:

‚úÖ **–†–µ–∞–ª—å–Ω–æ–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** —á–µ—Ä–µ–∑ ethers.js v6  
‚úÖ **EIP-712 –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è x402 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞  
‚úÖ **–†–∞–±–æ—Ç–∞ —Å ERC-20 —Ç–æ–∫–µ–Ω–∞–º–∏** (USDC, USDT)  
‚úÖ **–£–º–Ω—ã–π fallback** –Ω–∞ –ø—Ä—è–º—É—é –æ—Ç–ø—Ä–∞–≤–∫—É  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞  
‚úÖ **Production-ready –∫–æ–¥** —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫  

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≥–æ—Ç–æ–≤–∞ –∫:

- ‚úÖ –ü—Ä–∏–µ–º—É —Ä–µ–∞–ª—å–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Coinbase CDP facilitator
- ‚úÖ –†–∞–±–æ—Ç–µ –≤ mainnet (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É

### –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å facilitator (Coinbase CDP)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ testnet
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
5. –î–µ–ø–ª–æ–π –≤ production

---

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** Cline AI Assistant  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 30 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.0 (Production-Ready)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**: –í—Å–µ 4 –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ x402 –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. **–ò–∑—É—á–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã**: –†–∞–∑–¥–µ–ª "–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è" –≤ —ç—Ç–æ–º –æ—Ç—á–µ—Ç–µ
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: console.log –≤–æ –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Ç–æ—á–∫–∞—Ö
4. **Testnet –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º**: –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ Base Sepolia

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm list ethers

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
npm run type-check

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint

# –¢–µ—Å—Ç—ã
npm test
```

---

**–£—Å–ø–µ—Ö–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π! üöÄ**
