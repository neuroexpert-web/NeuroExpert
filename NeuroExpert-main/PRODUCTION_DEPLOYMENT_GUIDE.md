# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É x402 –≤ Production

**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** NeuroExpert  
**–ü—Ä–æ—Ç–æ–∫–æ–ª:** x402 Payment Integration  
**–î–∞—Ç–∞:** 30 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.0

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—à–∞–≥-1-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
3. [–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Coinbase CDP](#—à–∞–≥-2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-coinbase-cdp)
4. [–®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è](#—à–∞–≥-3-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
5. [–®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Testnet](#—à–∞–≥-4-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–Ω–∞-testnet)
6. [–®–∞–≥ 5: Deployment –≤ Production](#—à–∞–≥-5-deployment-–≤-production)
7. [–®–∞–≥ 6: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞](#—à–∞–≥-6-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ø–æ–¥–¥–µ—Ä–∂–∫–∞)
8. [Troubleshooting](#troubleshooting)
9. [–ß–µ–∫–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞](#—á–µ–∫–ª–∏—Å—Ç-–∑–∞–ø—É—Å–∫–∞)

---

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û:
- ‚úÖ Node.js 20.x –∏–ª–∏ –≤—ã—à–µ
- ‚úÖ PostgreSQL 14+ (–¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ Git
- ‚úÖ MetaMask –∏–ª–∏ Coinbase Wallet (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:
- ‚úÖ Coinbase Developer Platform –∞–∫–∫–∞—É–Ω—Ç
- ‚úÖ –•–æ—Å—Ç–∏–Ω–≥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Vercel, Netlify, Railway, etc.)
- ‚úÖ Ethereum/Base –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è:
- ‚úÖ –ë–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –±–ª–æ–∫—á–µ–π–Ω —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- ‚úÖ –ó–Ω–∞–Ω–∏–µ SQL –∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ –û–ø—ã—Ç –¥–µ–ø–ª–æ—è Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

## –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1.1 –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ë–î

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

**Option A: Supabase (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier: 500MB, 2GB transfer
- PostgreSQL out of the box
- Web UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

**Option B: Neon**
- Serverless PostgreSQL
- Generous free tier
- –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**Option C: Railway**
- $5/–º–µ—Å—è—Ü –∑–∞ 512MB RAM
- Easy to use
- Integrated deployment

### 1.2 –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –î–ª—è Supabase:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://supabase.com
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:
   ```
   Name: NeuroExpert Production
   Database Password: [secure password]
   Region: [closest to your users]
   ```

3. –ü–æ–ª—É—á–∏—Ç–µ connection string:
   ```
   Settings ‚Üí Database ‚Üí Connection String
   ```

#### –ü—Ä–∏–º–µ—Ä connection string:
```
postgresql://postgres:[PASSWORD]@db.xxx.supabase.co:5432/postgres
```

### 1.3 –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL —Å—Ö–µ–º—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –≤ Supabase (–∏–ª–∏ pgAdmin –¥–ª—è –¥—Ä—É–≥–∏—Ö –ë–î)

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `database/schema.sql`

3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
   ```sql
   SELECT tablename FROM pg_tables 
   WHERE schemaname = 'public'
   ORDER BY tablename;
   ```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ users
- ‚úÖ user_balances
- ‚úÖ crypto_transactions
- ‚úÖ balance_history
- ‚úÖ agent_usage
- ‚úÖ pending_payments
- ‚úÖ user_settings
- ‚úÖ transaction_limits
- ‚úÖ api_logs

### 1.4 –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
-- –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!
INSERT INTO users (email, wallet_address) 
VALUES ('test@neuroexpert.com', '0xYourTestWalletAddress');

-- –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
INSERT INTO user_balances (user_id, balance, currency)
VALUES (1, 0.00, 'USD');
```

### 1.5 –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ DATABASE_URL

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:
```env
DATABASE_URL=postgresql://postgres:[PASSWORD]@db.xxx.supabase.co:5432/postgres
```

---

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Coinbase CDP

–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –≤ `COINBASE_CDP_SETUP_GUIDE.md`

### 2.1 –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
   - https://cdp.coinbase.com/
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
   - –í–∫–ª—é—á–∏—Ç–µ 2FA

2. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤:**
   - Production –ø—Ä–æ–µ–∫—Ç: "NeuroExpert Production"
   - Testnet –ø—Ä–æ–µ–∫—Ç: "NeuroExpert Testnet"

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π:**
   
   **Production:**
   ```
   API Key: cdp_live_xxxxxxxxxxxx
   API Secret: xxxxxxxxxxxxxxxx
   Facilitator URL: https://facilitator.coinbase.com
   ```

   **Testnet:**
   ```
   API Key: cdp_test_xxxxxxxxxxxx
   API Secret: xxxxxxxxxxxxxxxx
   Facilitator URL: https://facilitator-testnet.coinbase.com
   ```

4. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞:**
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ—à–µ–ª–µ–∫ –≤ MetaMask/Coinbase Wallet
   - **–í–ê–ñ–ù–û:** –•—Ä–∞–Ω–∏—Ç–µ seed phrase –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ (0x...)

---

## –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 3.1 –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ `.env.local`:

```env
# ============================================
# Database
# ============================================
DATABASE_URL=postgresql://postgres:password@localhost:5432/neuroexpert

# ============================================
# Coinbase CDP (Testnet)
# ============================================
NEXT_PUBLIC_X402_FACILITATOR_URL=https://facilitator-testnet.coinbase.com
X402_FACILITATOR_API_KEY=cdp_test_xxxxxxxxxxxx
X402_FACILITATOR_SECRET=xxxxxxxxxxxxxxxx

# ============================================
# Blockchain Configuration (Testnet)
# ============================================
NEXT_PUBLIC_USE_TESTNET=true
NEXT_PUBLIC_DEFAULT_CHAIN=base_sepolia
NEXT_PUBLIC_DEFAULT_TOKEN=usdc
NEXT_PUBLIC_RECIPIENT_WALLET_ADDRESS=0xYourTestnetAddress

# ============================================
# Limits
# ============================================
NEXT_PUBLIC_MIN_TRANSACTION_AMOUNT=1
NEXT_PUBLIC_MAX_TRANSACTION_AMOUNT=1000
NEXT_PUBLIC_PAYMENT_DEADLINE_MINUTES=30
```

### 3.2 Production Configuration

**–î–ª—è Vercel:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Vercel Dashboard –∏–ª–∏ CLI
vercel env add DATABASE_URL production
vercel env add X402_FACILITATOR_API_KEY production
vercel env add X402_FACILITATOR_SECRET production
vercel env add NEXT_PUBLIC_RECIPIENT_WALLET_ADDRESS production
```

**Production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```env
# Database
DATABASE_URL=postgresql://[production-db-url]

# Coinbase CDP (Production)
NEXT_PUBLIC_X402_FACILITATOR_URL=https://facilitator.coinbase.com
X402_FACILITATOR_API_KEY=cdp_live_xxxxxxxxxxxx
X402_FACILITATOR_SECRET=xxxxxxxxxxxxxxxx

# Blockchain (Mainnet)
NEXT_PUBLIC_USE_TESTNET=false
NEXT_PUBLIC_DEFAULT_CHAIN=base
NEXT_PUBLIC_DEFAULT_TOKEN=usdc
NEXT_PUBLIC_RECIPIENT_WALLET_ADDRESS=0xYourMainnetAddress

# Limits (Production)
NEXT_PUBLIC_MIN_TRANSACTION_AMOUNT=10
NEXT_PUBLIC_MAX_TRANSACTION_AMOUNT=50000
NEXT_PUBLIC_PAYMENT_DEADLINE_MINUTES=60
```

---

## –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Testnet

### 4.1 –ü–æ–ª—É—á–µ–Ω–∏–µ testnet —Ç–æ–∫–µ–Ω–æ–≤

**Base Sepolia ETH:**
```
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://faucet.quicknode.com/base/sepolia
2. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à testnet –∞–¥—Ä–µ—Å
3. –ü–æ–ª—É—á–∏—Ç–µ 0.1 ETH (–¥–ª—è gas)
```

**Base Sepolia USDC:**
```
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://faucet.circle.com/
2. –í—ã–±–µ—Ä–∏—Ç–µ Base Sepolia network
3. –ü–æ–ª—É—á–∏—Ç–µ testnet USDC
```

### 4.2 –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
node scripts/test-x402-integration.js
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ x402 –¥–ª—è NeuroExpert   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
–¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ Facilitator URL: https://facilitator-testnet.coinbase.com
‚úÖ Recipient Address: 0x...
‚úÖ Default Chain: base_sepolia
‚úÖ Default Token: usdc

... –≤—Å–µ —Ç–µ—Å—Ç—ã ...

üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã! (6/6)
```

### 4.3 E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   npm run dev
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:**
   ```
   http://localhost:3000
   ```

3. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ MetaMask:**
   - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ Base Sepolia
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫

4. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂:**
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ $10
   - –ü–æ–¥–ø–∏—à–∏—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ MetaMask
   - –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:**
   ```sql
   SELECT * FROM crypto_transactions 
   ORDER BY created_at DESC 
   LIMIT 5;
   ```

### 4.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Fallback

1. –û—Ç–∫–ª—é—á–∏—Ç–µ facilitator (–Ω–µ–≤–µ—Ä–Ω—ã–π URL –≤ .env)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–ª–∞—Ç–µ–∂
3. –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä—è–º–æ–π –º–µ—Ç–æ–¥
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–ª–∞—Ç–µ–∂ –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –®–∞–≥ 5: Deployment –≤ Production

### Option A: Vercel (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 5.1 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Vercel CLI
npm i -g vercel

# –õ–æ–≥–∏–Ω
vercel login
```

#### 5.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Database
vercel env add DATABASE_URL production

# x402
vercel env add X402_FACILITATOR_API_KEY production
vercel env add X402_FACILITATOR_SECRET production
vercel env add NEXT_PUBLIC_X402_FACILITATOR_URL production
vercel env add NEXT_PUBLIC_RECIPIENT_WALLET_ADDRESS production

# Configuration
vercel env add NEXT_PUBLIC_DEFAULT_CHAIN production
vercel env add NEXT_PUBLIC_DEFAULT_TOKEN production
```

#### 5.3 –î–µ–ø–ª–æ–π

```bash
# Production deployment
vercel --prod
```

### Option B: Railway

#### 5.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI
npm i -g @railway/cli

# –õ–æ–≥–∏–Ω
railway login

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
railway init
```

#### 5.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Railway Dashboard
# –∏–ª–∏ —á–µ—Ä–µ–∑ CLI:
railway variables set DATABASE_URL=...
railway variables set X402_FACILITATOR_API_KEY=...
```

#### 5.3 –î–µ–ø–ª–æ–π

```bash
railway up
```

### Option C: Netlify

–°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `NETLIFY_DEPLOYMENT_GUIDE.md`

---

## –®–∞–≥ 6: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 6.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Sentry (Error Tracking)

```bash
npm install @sentry/nextjs
```

```env
NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/xxx
```

### 6.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```javascript
// lib/logger.js
export function logTransaction(data) {
  const entry = {
    timestamp: new Date().toISOString(),
    ...data
  };
  
  console.log(JSON.stringify(entry));
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  if (process.env.SENTRY_DSN) {
    Sentry.captureMessage(JSON.stringify(entry));
  }
}
```

### 6.3 Health Checks

–°–æ–∑–¥–∞–π—Ç–µ `/api/health`:

```javascript
export async function GET() {
  const checks = {
    database: await checkDatabase(),
    facilitator: await checkFacilitator(),
    timestamp: new Date().toISOString()
  };
  
  return Response.json(checks);
}
```

### 6.4 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**Dashboard –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- –£—Å–ø–µ—à–Ω—ã–µ/–Ω–µ—É—Å–ø–µ—à–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (%)
- –°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Gas costs

### 6.5 Alerts

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è:
- ‚ùå Failed transactions > 5% –∑–∞ —á–∞—Å
- ‚ö†Ô∏è Facilitator –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚ö†Ô∏è Database connection errors
- ‚ö†Ô∏è High gas prices
- ‚ö†Ô∏è Low balance –≤ recipient –∫–æ—à–µ–ª—å–∫–µ

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Database connection failed"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ connection string
echo $DATABASE_URL

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
psql $DATABASE_URL -c "SELECT 1"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall rules
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∞—à server IP –≤ whitelist
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "Facilitator unavailable"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: https://status.coinbase.com/
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ facilitator URL
4. Fallback –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "Transaction verification failed"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ deadline –Ω–µ –∏—Å—Ç–µ–∫
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ EIP-712 –ø–æ–¥–ø–∏—Å—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "Insufficient gas"

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –£–≤–µ–ª–∏—á—å—Ç–µ gas limit
const tx = {
  ...transaction,
  gasLimit: ethers.parseUnits('100000', 'wei')
};
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: "High memory usage"

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ Next.js
// next.config.js
module.exports = {
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production'
  }
};
```

---

## –ß–µ–∫–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

### Pre-Launch (1-2 –Ω–µ–¥–µ–ª–∏ –¥–æ –∑–∞–ø—É—Å–∫–∞)

```markdown
Backend:
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] SQL —Å—Ö–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã
- [ ] Connection pooling –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

Blockchain:
- [ ] Production –∫–æ—à–µ–ª–µ–∫ —Å–æ–∑–¥–∞–Ω
- [ ] Seed phrase —Å–æ—Ö—Ä–∞–Ω–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ
- [ ] –ö–æ—à–µ–ª–µ–∫ –ø–æ–ø–æ–ª–Ω–µ–Ω –¥–ª—è gas
- [ ] –ê–¥—Ä–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] RPC endpoints —Ä–∞–±–æ—Ç–∞—é—Ç

x402:
- [ ] Coinbase CDP –∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω
- [ ] Production API –∫–ª—é—á–∏ –ø–æ–ª—É—á–µ–Ω—ã
- [ ] Testnet —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] Facilitator health check —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Webhooks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

Application:
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Tests –ø—Ä–æ–π–¥–µ–Ω—ã (100%)
- [ ] E2E —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

Security:
- [ ] API –∫–ª—é—á–∏ –Ω–µ –≤ –∫–æ–¥–µ
- [ ] Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Input validation –≤–µ–∑–¥–µ
- [ ] SQL injection –∑–∞—â–∏—Ç–∞
- [ ] XSS protection

Monitoring:
- [ ] Sentry –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Logging —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Alerts –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Dashboard –≥–æ—Ç–æ–≤
- [ ] On-call rotation –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
```

### Launch Day

```markdown
Morning:
- [ ] Final smoke tests
- [ ] Database backup
- [ ] Team briefing
- [ ] Support channels ready

Deployment:
- [ ] Deploy to production
- [ ] Verify all services up
- [ ] Run health checks
- [ ] Test payment flow
- [ ] Monitor for 1 hour

Post-Launch:
- [ ] Announce launch
- [ ] Monitor metrics
- [ ] Watch for errors
- [ ] Be ready for hotfixes
- [ ] Document any issues
```

### Post-Launch (First Week)

```markdown
Daily:
- [ ] Check error rates
- [ ] Review transaction logs
- [ ] Monitor gas costs
- [ ] Check facilitator status
- [ ] Review user feedback

Weekly:
- [ ] Analyze metrics
- [ ] Review costs
- [ ] Plan optimizations
- [ ] Update documentation
- [ ] Team retrospective
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:
- `X402_QUICK_START.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `X402_PRODUCTION_READY_REPORT.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `COINBASE_CDP_SETUP_GUIDE.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CDP
- `database/schema.sql` - SQL —Å—Ö–µ–º–∞

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã:
- Coinbase CDP: https://docs.cdp.coinbase.com/
- x402 Protocol: https://www.x402.org/
- Base Network: https://docs.base.org/
- ethers.js: https://docs.ethers.org/

### Emergency Contacts:
- Coinbase Support: support@coinbase.com
- Coinbase Status: https://status.coinbase.com/
- Base Discord: https://discord.gg/base

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ NeuroExpert –≥–æ—Ç–æ–≤–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª x402!

**–ü–æ–º–Ω–∏—Ç–µ:**
- üîç –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º—É –ø–µ—Ä–≤—ã–µ –Ω–µ–¥–µ–ª–∏
- üìä –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–µ–≥
