/* 
ИСПРАВЛЕНИЯ ДАШБОРДОВ И ГРАФИКОВ
Исправляет проблемы с размерами, отступами и позиционированием
*/

/* === КОНТЕЙНЕРЫ ГРАФИКОВ === */
#analytics-dashboard .charts-container {
  display: grid !important;
  grid-template-columns: 1fr !important;
  gap: 32px !important;
  margin: 0 !important;
  padding: 0 !important;
}

@media (min-width: 1024px) {
  #analytics-dashboard .charts-container {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

@media (min-width: 1440px) {
  #analytics-dashboard .charts-container {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

#analytics-dashboard .chart-card {
  min-height: 400px !important;
  display: flex !important;
  flex-direction: column !important;
  background: rgba(30, 41, 59, 0.9) !important;
  backdrop-filter: blur(16px) !important;
  border: 1px solid rgba(71, 85, 105, 0.9) !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
}

#analytics-dashboard .chart-header {
  flex-shrink: 0 !important;
  padding-bottom: 16px !important;
  border-bottom: 1px solid rgba(71, 85, 105, 0.5) !important;
  margin-bottom: 20px !important;
}

#analytics-dashboard .chart-wrapper {
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  min-height: 280px !important;
  background: rgba(15, 23, 42, 0.7) !important;
  border-radius: 12px !important;
  padding: 20px !important;
  position: relative !important;
}

/* === KPI КАРТОЧКИ ИСПРАВЛЕНИЯ === */
#analytics-dashboard .kpi-cards {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)) !important;
  gap: 24px !important;
  margin-bottom: 48px !important;
}

@media (max-width: 768px) {
  #analytics-dashboard .kpi-cards {
    grid-template-columns: 1fr !important;
    gap: 20px !important;
  }
}

#analytics-dashboard .kpi-card {
  min-height: 200px !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: space-between !important;
  background: rgba(30, 41, 59, 0.9) !important;
  backdrop-filter: blur(16px) !important;
  border: 1px solid rgba(71, 85, 105, 0.9) !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
}

#analytics-dashboard .kpi-header {
  flex-shrink: 0 !important;
}

#analytics-dashboard .kpi-value {
  flex-shrink: 0 !important;
  margin: 16px 0 !important;
}

#analytics-dashboard .kpi-trend {
  flex-shrink: 0 !important;
}

#analytics-dashboard .kpi-explanation {
  flex-shrink: 0 !important;
  margin-top: auto !important;
}

/* === ИНСАЙТЫ ИСПРАВЛЕНИЯ === */
#analytics-dashboard .insights-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
  gap: 24px !important;
}

@media (max-width: 768px) {
  #analytics-dashboard .insights-grid {
    grid-template-columns: 1fr !important;
    gap: 20px !important;
  }
}

#analytics-dashboard .insight-card {
  min-height: 180px !important;
  display: flex !important;
  flex-direction: column !important;
  background: rgba(30, 41, 59, 0.9) !important;
  backdrop-filter: blur(16px) !important;
  border: 1px solid rgba(71, 85, 105, 0.9) !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
}

#analytics-dashboard .insight-action {
  margin-top: auto !important;
}

/* === ВИДЖЕТ ПРОИЗВОДИТЕЛЬНОСТИ === */
#analytics-dashboard .performance-widget {
  background: rgba(30, 41, 59, 0.9) !important;
  backdrop-filter: blur(16px) !important;
  border: 1px solid rgba(71, 85, 105, 0.9) !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
  margin-bottom: 48px !important;
}

#analytics-dashboard .performance-metrics {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
  gap: 16px !important;
}

@media (max-width: 768px) {
  #analytics-dashboard .performance-metrics {
    grid-template-columns: 1fr !important;
  }
}

/* === ИСПРАВЛЕНИЕ ПЕРЕПОЛНЕНИЯ === */
#analytics-dashboard * {
  word-break: break-word !important;
  overflow-wrap: break-word !important;
}

#analytics-dashboard .chart-title-group,
#analytics-dashboard .kpi-title-group,
#analytics-dashboard .segment-title-group {
  min-width: 0 !important;
  flex: 1 !important;
}

/* === ИСПРАВЛЕНИЕ ВЫСОТЫ КОНТЕЙНЕРОВ === */
#analytics-dashboard .full-page {
  min-height: auto !important;
  height: auto !important;
}

#analytics-dashboard .scrollable-section {
  height: auto !important;
  overflow: visible !important;
}

/* === ДОПОЛНИТЕЛЬНЫЕ ОТСТУПЫ ДЛЯ БЕЗОПАСНОСТИ === */
#analytics-dashboard {
  padding-bottom: 80px !important;
}

#analytics-dashboard .page-header {
  margin-bottom: 32px !important;
}

#analytics-dashboard .filters-panel {
  margin-bottom: 40px !important;
}

#analytics-dashboard .kpi-section {
  margin-bottom: 32px !important;
}

#analytics-dashboard .charts-section {
  margin-bottom: 48px !important;
}

#analytics-dashboard .traffic-insights-panel {
  margin-bottom: 48px !important;
}

#analytics-dashboard .performance-widget {
  margin-bottom: 48px !important;
}

/* === ПРИНУДИТЕЛЬНЫЕ ИСПРАВЛЕНИЯ === */
#analytics-dashboard .glass-card {
  position: static !important;
  transform: none !important;
  margin: 0 !important;
  float: none !important;
  clear: both !important;
}

/* === ИСПРАВЛЕНИЕ ПРОБЛЕМ С FLEX === */
#analytics-dashboard .charts-section > * {
  margin-bottom: 24px !important;
}

#analytics-dashboard .charts-section > *:last-child {
  margin-bottom: 0 !important;
}

/* === ИСПРАВЛЕНИЕ СКРЫТЫХ ЭЛЕМЕНТОВ === */
#analytics-dashboard [hidden] {
  display: none !important;
}

#analytics-dashboard .tooltip:not([hidden]) {
  display: block !important;
  position: absolute !important;
  top: 100% !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  margin-top: 8px !important;
}

/* === БЕЗОПАСНЫЕ РАЗМЕРЫ === */
#analytics-dashboard .kpi-card,
#analytics-dashboard .chart-card,
#analytics-dashboard .insight-card {
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

/* === ИСПРАВЛЕНИЕ ПРОБЛЕМ С ТЕКСТОМ === */
#analytics-dashboard {
  font-size: 14px !important;
  line-height: 1.6 !important;
}

#analytics-dashboard small {
  font-size: 12px !important;
  color: #94a3b8 !important;
}

#analytics-dashboard .text-xs {
  font-size: 11px !important;
}

#analytics-dashboard .text-sm {
  font-size: 13px !important;
}

#analytics-dashboard .text-base {
  font-size: 14px !important;
}

#analytics-dashboard .text-lg {
  font-size: 16px !important;
}

/* === ИСПРАВЛЕНИЕ АНИМАЦИЙ === */
#analytics-dashboard * {
  animation-duration: 0.3s !important;
  animation-timing-function: ease-out !important;
}

#analytics-dashboard .kpi-card:hover,
#analytics-dashboard .chart-card:hover,
#analytics-dashboard .insight-card:hover {
  animation: none !important;
}

/* === ОТЛАДОЧНЫЕ СТИЛИ (удалить в production) === */
/*
#analytics-dashboard .kpi-card {
  border: 2px solid red !important;
}

#analytics-dashboard .chart-card {
  border: 2px solid blue !important;
}

#analytics-dashboard .insight-card {
  border: 2px solid green !important;
}
*/